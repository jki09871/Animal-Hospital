<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="animal">

    <insert id="signup" parameterType="com.review.dto.AnimalMemberDTO">
        /** 회원 가입 **/
        INSERT INTO ANIMAL_OWNER
        (
        OWNER_ID,            /** 회원 아이디 **/
        PASSWORD,             /** 회원 비밀번호 **/
        EMAIL,               /** 회원 이메일 **/
        PHONENUMBER,         /** 회원 핸드폰번호 **/
        PETID                /** 동물 고유번호 **/
        )
        VALUES
        (
        #{ownerId},
        #{password},
        #{email},
        #{phoneNumber},
        #{petId}
        )
    </insert>

    <select id="login" parameterType="com.review.dto.AnimalMemberDTO" resultType="com.review.dto.AnimalMemberDTO">
        SELECT
            OWNER_ID,            /** 회원 아이디 **/
            PASSWORD,      /** 회원 비밀번호 **/
            EMAIL,         /** 회원 이메일 **/
            PHONENUMBER,   /** 회원 핸드폰번호 **/
            PETID               /** 동물 고유번호 **/
        FROM ANIMAL_OWNER
        WHERE OWNER_ID = #{ownerId} AND PASSWORD = #{password}
    </select>

    <select id="emailCheck" parameterType="hashMap" resultType="int">
        SELECT
            COUNT(*)
        FROM ANIMAL_OWNER
        WHERE  1 = 1
        <if test="email != null and email != '' ">
            AND  EMAIL =  #{email}
        </if>
        <if test="ownerId != null and ownerId != '' ">
            AND  OWNER_ID =  #{ownerId}
        </if>
    </select>

</mapper>